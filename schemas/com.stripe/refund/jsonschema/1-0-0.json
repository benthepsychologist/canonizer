{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Stripe Refund",
  "description": "Stripe Refund object from Stripe API. Based on https://docs.stripe.com/api/refunds/object",
  "type": "object",
  "required": ["id", "object", "amount", "currency"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Unique identifier for the refund",
      "examples": ["re_3MtweELkdIwHu7ix1P8GHrdT"]
    },
    "object": {
      "type": "string",
      "const": "refund",
      "description": "String representing the object type"
    },
    "amount": {
      "type": "integer",
      "description": "Refund amount in smallest currency unit"
    },
    "currency": {
      "type": "string",
      "description": "Three-letter ISO currency code (lowercase)"
    },
    "charge": {
      "type": ["string", "null"],
      "description": "ID of the charge being refunded"
    },
    "payment_intent": {
      "type": ["string", "null"],
      "description": "ID of the PaymentIntent being refunded"
    },
    "status": {
      "type": ["string", "null"],
      "enum": ["pending", "requires_action", "succeeded", "failed", "canceled", null],
      "description": "Status of the refund"
    },
    "reason": {
      "type": ["string", "null"],
      "enum": ["duplicate", "fraudulent", "requested_by_customer", null],
      "description": "Reason for the refund"
    },
    "description": {
      "type": ["string", "null"],
      "description": "Description of the refund (non-card only)"
    },
    "balance_transaction": {
      "type": ["string", "null"],
      "description": "ID of balance transaction for refund"
    },
    "failure_balance_transaction": {
      "type": ["string", "null"],
      "description": "ID of balance transaction for failed refund"
    },
    "failure_reason": {
      "type": ["string", "null"],
      "description": "Reason for refund failure",
      "examples": ["expired_or_canceled_card", "lost_or_stolen_card", "unknown"]
    },
    "receipt_number": {
      "type": ["string", "null"],
      "description": "Transaction number for the refund receipt"
    },
    "source_transfer_reversal": {
      "type": ["string", "null"],
      "description": "Source transfer reversal reference"
    },
    "transfer_reversal": {
      "type": ["string", "null"],
      "description": "Destination transfer reversal reference"
    },
    "destination_details": {
      "type": ["object", "null"],
      "description": "Details about refund destination",
      "properties": {
        "type": {"type": "string"}
      },
      "additionalProperties": true
    },
    "instructions_email": {
      "type": ["string", "null"],
      "format": "email",
      "description": "Email for refund instructions (non-native methods)"
    },
    "next_action": {
      "type": ["object", "null"],
      "description": "Required action for refund processing",
      "properties": {
        "type": {"type": "string"},
        "display_details": {"type": ["object", "null"]}
      }
    },
    "livemode": {
      "type": "boolean",
      "description": "True if live mode, false if test mode"
    },
    "metadata": {
      "type": ["object", "null"],
      "description": "Custom key-value pairs",
      "additionalProperties": {"type": "string"}
    },
    "created": {
      "type": "integer",
      "description": "Creation time as Unix timestamp"
    }
  },
  "additionalProperties": true
}
